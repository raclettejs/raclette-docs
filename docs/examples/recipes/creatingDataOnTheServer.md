# Creating Data on the Server

**Estimated Time:** 5min
**Difficulty:** Easy
**Version:** 0.1.\*

## Context

Will teach you how to create an Item for the previous defined DataType

## Prerequisites

- Raclette CLI installed
- Raclette Server running
- Node.js 24+
- You have finished the setting up a todo plugin example and it's up and running

## Our Datatype

At first we need to specify our dataType and what we want to create. For this Example we will assume:

```variables-hide-table
PLUGINNAME: example-todoplugin
DATATYPE: todo
BROADCASTCHANNELS: todoCreated
STOREACTIONTYPE: dataCreate
BODYSCHEMA: todoCreateSchema
ROUTENAME: create
ROUTEMETHOD: post
RESPONSETYPE: json
```

## Declare route on the server side

In our `./plugins/${PLUGINNAME:example-plugin}/server/plugin/routes.ts` we want to define our Create route.

<!--@include: ../cooking-steps/server/plugin/singleRoute.md{
BUSINESSLOGIC: |
  try {
    // Add owner and lastEditor from the authenticated user
    const todoData = {
      ...req.body,
      owner: req.user._id,
      lastEditor: req.user._id,
    }

    const payload = await fastify.custom.todoService.createTodo(
      fastify,
      req.requestParams,
      todoData,
    )

    return reply.status(201).send(payload)
  } catch (err: any) {
    fastify.log.error(`Error creating todo: ${err.message}`)
    return reply.internalServerError(err.message)
  }
}-->

## Declare route on the client side

If you set up your serverroutes correctly you should find a `./plugins/${PLUGINNAME:example-plugin}/client/generated-config.ts` which contains the autogenerated client config. In case you want to declare a custom route which is not party of the autogenerated file, you can to this in your `./plugins/${PLUGINNAME:example-plugin}/client/index.ts`.

<!--@include: ../cooking-steps/client/plugin/routeDeclaration.md-->

## Creating data in our widget

Now we can query our endpoint with the clientApi fron our component

<!--@include: ../cooking-steps/client/api/data.md -->

After defining our action and the corresponding outputs we can now trigger the action when needed.

```typescript
const createData = async (newItem) => {
  // log the action outputs before and after to see what happens!
  console.log(data, query, execute, isLoading, error)
  const createdItem = await execute(newItem)
  // log the action outputs before and after to see what happens!
  console.log(createdItem)
  console.log(data, query, execute, isLoading, error)
}
```
