<!--@include: ../wip.md-->

# Creating Data on the Server

**Estimated Time:** 10min
**Difficulty:** Easy
**Version:** 0.1.\*

## Context

Will teach you how to declare a dataType and it's route and how to create data with it

## Prerequisites

- Raclette CLI installed
- Raclette Server running
- Node.js 24+

## Our Datatype

At first we need to specify our dataType and what we want to create. For this Example we will assume:

```variables
PLUGINNAME: "example-todoplugin"
DATATYPE: "todo"
ROUTENAME: "create"
ROUTEMETHOD: "post"
BROADCASTCHANNELS: "fickert"
```

## Our Serverside Setup

## Declare a Schema

In our `./plugins/${PLUGINNAME:example-plugin}/server/${DATATYPE:example}.schema.ts` we want to define our Data Schema.

<!--@include: ../cooking-steps/server/plugin/schema.md{SCHEMANAME: Todo}-->

## Declare Model

In our `./plugins/${PLUGINNAME:example-plugin}/server/${DATATYPE:example}.model.ts` we want to define our Data model.

<!--@include: ../cooking-steps/server/plugin/model.md{SCHEMANAME: Todo}-->

## Declare route on the server side

In our `./plugins/${PLUGINNAME:example-plugin}/server/plugin/routes.ts` we want to define our Create route.

<!--@include: ../cooking-steps/server/plugin/singleRoute.md{BROADCASTCHANNELS: todoCreated, STOREACTIONTYPE: dataCreate}-->

In this example we want to provide a very simple create logic. See the best practice section for a fully fletched best practice example

<!--@include: ../cooking-steps/server/plugin/logics/create.md-->

## Declare route on the client side

If you set up your serverroutes correctly you should find a `./plugins/${PLUGINNAME:example-plugin}/client/generated-config.ts` which contains the autogenerated client config. In case you want to declare a custom route which is not party of the autogenerated file, you can to this in your `./plugins/${PLUGINNAME:example-plugin}/client/index.ts`.

<!--@include: ../cooking-steps/client/plugin/routeDeclaration.md{
STOREACTIONTYPE: dataCreate
}-->

## Creating data in our widget

Now we can query our endpoint with the clientApi fron our component

<!--@include: ../cooking-steps/client/api/data.md{RESPONSETYPE:json} -->

After defining our action and the corresponding outputs we can now trigger the action when needed.

```typescript
const createData = async (newItem) => {
  // log the action outputs before and after to see what happens!
  console.log(data, query, execute, isLoading, error)
  const createdItem = await execute(newItem)
  // log the action outputs before and after to see what happens!
  console.log(createdItem)
  console.log(data, query, execute, isLoading, error)
}
```
